<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة المونيتور</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>شاشة المونيتور</h1>

    <div id="monitorData">
        <p><strong>الاسم:</strong> <span id="patientName"></span></p>
        <p><strong>العمر:</strong> <span id="patientAge"></span></p>
        <p><strong>النبض:</strong> <span id="patientPulse"></span></p>
        <p><strong>ضغط الدم:</strong> <span id="patientBP"></span></p>
        <p><strong>الأكسجين:</strong> <span id="patientOxygen"></span></p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        const patientId = getQueryParam('id');
        if (!patientId) {
            alert("لا يوجد مريض محدد!");
            window.location.href = "emergency.html";
        }

        const patientRef = ref(db, `emergency/${patientId}`);
        onValue(patientRef, (snapshot) => {
            if (snapshot.exists()) {
                const data = snapshot.val();
                document.getElementById('patientName').textContent = data.name || '';
                document.getElementById('patientAge').textContent = data.age || '';
                document.getElementById('patientPulse').textContent = data.pulse || '';
                document.getElementById('patientBP').textContent = data.bp || '';
                document.getElementById('patientOxygen').textContent = data.oxygen || '';
            } else {
                alert("لم يتم العثور على بيانات هذا المريض.");
            }
        });
    </script>
</body>
</html>
