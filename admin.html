<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุดูู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#2563eb',
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        secondary: {
                            DEFAULT: '#10b981',
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            200: '#a7f3d0',
                            300: '#6ee7b7',
                            400: '#34d399',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .sidebar-link.active {
            background-color: #1d4ed8;
        }
        .vanta-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }
    </style>
</head>
<body class="bg-gray-50 flex">
    <div class="vanta-bg" id="vanta-bg"></div>
    
    <!-- ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ -->
    <div class="w-64 bg-primary-900 text-white min-h-screen p-4 flex flex-col transition-all duration-300 ease-in-out transform hover:shadow-xl">
        <div class="flex flex-col items-center mb-6">
            <div class="w-20 h-20 rounded-full mb-3 bg-white flex items-center justify-center shadow-lg">
                <i data-feather="heart" class="text-primary-600 w-10 h-10"></i>
            </div>
            <h2 class="text-xl font-bold flex items-center">
                <span>LifePulse</span>
                <span class="ml-2 text-secondary-400">๐</span>
            </h2>
            <p class="text-sm text-primary-200 mt-1">ูุธุงู ุฅุฏุงุฑุฉ ุงููุณุชุดูู ุงูุฐูู</p>
        </div>
        
        <nav class="space-y-1 flex-grow">
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200 active" data-target="adminDashboard">
                <i data-feather="home" class="ml-2 w-5 h-5"></i>
                ููุญุฉ ุงูุชุญูู
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="patientsPage">
                <i data-feather="users" class="ml-2 w-5 h-5"></i>
                ุฅุฏุงุฑุฉ ุงููุฑุถู
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="doctorsPage">
                <i data-feather="user-plus" class="ml-2 w-5 h-5"></i>
                ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="departmentsPage">
                <i data-feather="grid" class="ml-2 w-5 h-5"></i>
                ุฅุฏุงุฑุฉ ุงูุฃูุณุงู
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="staffPage">
                <i data-feather="briefcase" class="ml-2 w-5 h-5"></i>
                ุฅุฏุงุฑุฉ ุงูููุธููู
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="attendancePage">
                <i data-feather="fingerprint" class="ml-2 w-5 h-5"></i>
                ุงูุญุถูุฑ ุจุงูุจุตูุฉ
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="inventoryPage">
                <i data-feather="package" class="ml-2 w-5 h-5"></i>
                ุฅุฏุงุฑุฉ ุงููุฎุฒูู
            </button>
            
            <button class="sidebar-link w-full text-right px-4 py-3 rounded-lg flex items-center justify-end hover:bg-primary-700 transition-all duration-200" data-target="statsPage">
                <i data-feather="bar-chart-2" class="ml-2 w-5 h-5"></i>
                ุงูุฅุญุตุงุฆูุงุช
            </button>
        </nav>
        
        <div class="mt-auto pt-4 border-t border-primary-700">
            <div class="flex items-center p-2 rounded-lg hover:bg-primary-800 transition-colors duration-200 cursor-pointer">
                <div class="w-8 h-8 rounded-full bg-primary-700 flex items-center justify-center">
                    <i data-feather="user" class="w-4 h-4"></i>
                </div>
                <div class="mr-2">
                    <p class="text-sm font-medium">ูุณุคูู ุงููุธุงู</p>
                    <p class="text-xs text-primary-300">Admin</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
    <div class="flex-1 p-6">
        <!-- ููุญุฉ ุงูุชุญูู -->
        <div id="adminDashboard" class="page">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">ููุญุฉ ุชุญูู ุงููุณุชุดูู</h1>
                    <div class="flex items-center">
                        <div class="relative">
                            <i data-feather="search" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input type="text" placeholder="ุจุญุซ..." class="pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all duration-300">
                        </div>
                    </div>
                </div>
                
                <!-- ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-primary-50 to-primary-100 p-6 rounded-xl border border-primary-200 flex items-start">
                        <div class="bg-primary-100 p-3 rounded-lg mr-4">
                            <i data-feather="users" class="text-primary-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุฅุฌูุงูู ุงููุฑุถู</p>
                            <p id="dashboardTotalPatients" class="text-2xl font-bold text-primary-800">0</p>
                            <p class="text-xs text-primary-600 mt-1 flex items-center">
                                <i data-feather="trending-up" class="w-3 h-3 mr-1"></i>
                                <span>+12% ุนู ุงูุดูุฑ ุงููุงุถู</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-secondary-50 to-secondary-100 p-6 rounded-xl border border-secondary-200 flex items-start">
                        <div class="bg-secondary-100 p-3 rounded-lg mr-4">
                            <i data-feather="user-check" class="text-secondary-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุงูุฃุทุจุงุก ุงููุชุงุญูู</p>
                            <p id="dashboardDoctorsOnline" class="text-2xl font-bold text-secondary-800">0</p>
                            <p class="text-xs text-secondary-600 mt-1 flex items-center">
                                <i data-feather="activity" class="w-3 h-3 mr-1"></i>
                                <span>5 ูุชุตููู ุงูุขู</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-6 rounded-xl border border-purple-200 flex items-start">
                        <div class="bg-purple-100 p-3 rounded-lg mr-4">
                            <i data-feather="calendar" class="text-purple-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุงูุฒูุงุฑุงุช ุงูููู</p>
                            <p id="dashboardTotalVisits" class="text-2xl font-bold text-purple-800">0</p>
                            <p class="text-xs text-purple-600 mt-1 flex items-center">
                                <i data-feather="clock" class="w-3 h-3 mr-1"></i>
                                <span>ุขุฎุฑ ุฒูุงุฑุฉ ูุจู 15 ุฏูููุฉ</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 p-6 rounded-xl border border-indigo-200 flex items-start">
                        <div class="bg-indigo-100 p-3 rounded-lg mr-4">
                            <i data-feather="grid" class="text-indigo-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุงูุฃูุณุงู ุงููุดุทุฉ</p>
                            <p id="dashboardTotalDepartments" class="text-2xl font-bold text-indigo-800">0</p>
                            <p class="text-xs text-indigo-600 mt-1 flex items-center">
                                <i data-feather="layers" class="w-3 h-3 mr-1"></i>
                                <span>3 ุฃูุณุงู ููุชูุฆุฉ</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- ูุณููู ุฑุฆูุณููู -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- ุขุฎุฑ ุงููุฑุถู -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                <i data-feather="clock" class="w-5 h-5 mr-2 text-primary-600"></i>
                                ุขุฎุฑ ุงููุฑุถู ุงููุณุฌููู
                            </h2>
                            <button class="text-sm text-primary-600 hover:text-primary-800 transition-colors duration-200 flex items-center"
                                    onclick="document.querySelector('.sidebar-link[data-target=\'patientsPage\']').click()">
                                ุนุฑุถ ุงููู
                                <i data-feather="chevron-left" class="w-4 h-4 mr-1"></i>
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead>
                                    <tr class="text-gray-500 text-xs border-b">
                                        <th class="text-right p-3">ุงูุงุณู</th>
                                        <th class="text-right p-3">ุงููุณู</th>
                                        <th class="text-right p-3">ุงูุชุงุฑูุฎ</th>
                                        <th class="text-right p-3">ุงูุญุงูุฉ</th>
                                    </tr>
                                </thead>
                                <tbody id="recentPatientsTable" class="text-sm divide-y divide-gray-100">
                                    <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ุงูุฃุทุจุงุก ุงููุชุงุญูู -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                <i data-feather="user-check" class="w-5 h-5 mr-2 text-secondary-600"></i>
                                ุงูุฃุทุจุงุก ุงููุชุงุญูู
                            </h2>
                            <div class="flex items-center">
                                <select id="filterShift" class="text-sm border rounded-lg px-3 py-1 focus:ring-2 focus:ring-primary-500 outline-none transition-all duration-300">
                                    <option value="all">ูู ุงููุฑุฏูุงุช</option>
                                    <option value="Morning">ุตุจุงุญู</option>
                                    <option value="Evening">ูุณุงุฆู</option>
                                    <option value="Night">ูููู</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead>
                                    <tr class="text-gray-500 text-xs border-b">
                                        <th class="text-right p-3">ุงูุงุณู</th>
                                        <th class="text-right p-3">ุงููุณู</th>
                                        <th class="text-right p-3">ุงููุฑุฏูุฉ</th>
                                        <th class="text-right p-3">ุงูุญุงูุฉ</th>
                                    </tr>
                                </thead>
                                <tbody id="availableDoctorsTable" class="text-sm divide-y divide-gray-100">
                                    <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- ุฅุดุนุงุฑุงุช ูููุฉ -->
                <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6">
                    <div class="flex items-start">
                        <div class="bg-yellow-100 p-2 rounded-lg mr-3">
                            <i data-feather="alert-circle" class="text-yellow-600 w-5 h-5"></i>
                        </div>
                        <div>
                            <h3 class="text-yellow-800 font-bold mb-1">ุฅุดุนุงุฑุงุช ูููุฉ</h3>
                            <p class="text-yellow-700 text-sm">
                                ูุฏูู 5 ูุดููุงุช ุทุจูุฉ ุชุญุชุงุฌ ููุฑุงุฌุนุฉุ ู 3 ููุงุนูุฏ ูู ูุชู ุชุฃููุฏูุง ุจุนุฏ.
                                <a href="#" class="text-yellow-800 font-medium underline">ุนุฑุถ ุงูุชูุงุตูู</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงููุฑุถู -->
        <div id="patientsPage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i data-feather="users" class="w-6 h-6 mr-2 text-primary-600"></i>
                        ุฅุฏุงุฑุฉ ุงููุฑุถู
                    </h2>
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <div class="relative">
                            <i data-feather="search" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input id="searchPatient" type="text" placeholder="ุงุจุญุซ ุนู ูุฑูุถ..." class="pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all duration-300 w-64">
                        </div>
                        <button id="addPatientBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors duration-200">
                            <i data-feather="plus" class="w-4 h-4 mr-1"></i>
                            ุฅุถุงูุฉ ูุฑูุถ
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุงุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุนูุฑ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุชุงุฑูุฎ ุงูุชุณุฌูู</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="patientsTable" class="bg-white divide-y divide-gray-200">
                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก -->
        <div id="doctorsPage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i data-feather="user-plus" class="w-6 h-6 mr-2 text-primary-600"></i>
                        ุฅุฏุงุฑุฉ ุงูุฃุทุจุงุก
                    </h2>
                    <button id="addDoctorBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors duration-200">
                        <i data-feather="plus" class="w-4 h-4 mr-1"></i>
                        ุฅุถุงูุฉ ุทุจูุจ
                    </button>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุงุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุฑุฏูุฉ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุญุงูุฉ</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="doctorsTable" class="bg-white divide-y divide-gray-200">
                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงูุฃูุณุงู -->
        <div id="departmentsPage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i data-feather="grid" class="w-6 h-6 mr-2 text-primary-600"></i>
                        ุฅุฏุงุฑุฉ ุงูุฃูุณุงู
                    </h2>
                    <button id="addDeptBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors duration-200">
                        <i data-feather="plus" class="w-4 h-4 mr-1"></i>
                        ุฅุถุงูุฉ ูุณู
                    </button>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงุณู ุงููุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ูุฏูุฑ ุงููุณู</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="departmentsTable" class="bg-white divide-y divide-gray-200">
                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงูููุธููู -->
        <div id="staffPage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i data-feather="briefcase" class="w-6 h-6 mr-2 text-primary-600"></i>
                        ุฅุฏุงุฑุฉ ุงูููุธููู
                    </h2>
                    <button id="addStaffBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors duration-200">
                        <i data-feather="plus" class="w-4 h-4 mr-1"></i>
                        ุฅุถุงูุฉ ููุธู
                    </button>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุงุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุธููุฉ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุฑูู ุงููุงุชู</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="staffTable" class="bg-white divide-y divide-gray-200">
                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุฅุฏุงุฑุฉ ุงูุญุถูุฑ ุจุงูุจุตูุฉ -->
        <div id="attendancePage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i data-feather="fingerprint" class="w-6 h-6 mr-2 text-primary-600"></i>
                        ุฅุฏุงุฑุฉ ุงูุญุถูุฑ ุจุงูุจุตูุฉ
                    </h2>
                    <button id="registerFingerprintBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors duration-200">
                        <i data-feather="plus" class="w-4 h-4 mr-1"></i>
                        ุชุณุฌูู ุจุตูุฉ ุฌุฏูุฏุฉ
                    </button>
                </div>
                
                <!-- ุชุจููุจุงุช ุงูุชุตููู -->
                <div class="mb-6">
                    <div class="flex border-b">
                        <button class="attendance-tab py-2 px-4 font-medium text-primary-600 border-b-2 border-primary-600 active" data-type="all">
                            ุงููู
                        </button>
                        <button class="attendance-tab py-2 px-4 font-medium text-gray-500 hover:text-primary-600" data-type="doctors">
                            ุงูุฃุทุจุงุก
                        </button>
                        <button class="attendance-tab py-2 px-4 font-medium text-gray-500 hover:text-primary-600" data-type="staff">
                            ุงูููุธููู
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุงุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูููุน</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููุณู</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุญุงูุฉ ุงูุญุงููุฉ</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTable" class="bg-white divide-y divide-gray-200">
                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุงููุฎุฒูู -->
        <div id="inventoryPage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i data-feather="package" class="w-6 h-6 mr-2 text-primary-600"></i>
                        ุฅุฏุงุฑุฉ ุงููุฎุฒูู
                    </h2>
                    <button id="addInventoryBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors duration-200">
                        <i data-feather="plus" class="w-4 h-4 mr-1"></i>
                        ุฅุถุงูุฉ ููุชุฌ
                    </button>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงุณู ุงูููุชุฌ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงููููุฉ ุงูุญุงููุฉ</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ุงูุญุฏ ุงูุฃุฏูู</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTable" class="bg-white divide-y divide-gray-200">
                            <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฏูู ุจุงูุจูุงูุงุช -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- ุงูุฅุญุตุงุฆูุงุช -->
        <div id="statsPage" class="page hidden">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-2xl font-bold mb-6 text-gray-800 flex items-center">
                    <i data-feather="bar-chart-2" class="w-6 h-6 mr-2 text-primary-600"></i>
                    ุฅุญุตุงุฆูุงุช ุงููุณุชุดูู
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start hover:shadow-md transition-shadow duration-300">
                        <div class="bg-primary-100 p-3 rounded-lg mr-4">
                            <i data-feather="users" class="text-primary-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุฅุฌูุงูู ุงููุฑุถู</p>
                            <p id="totalPatients" class="text-2xl font-bold text-primary-800">0</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start hover:shadow-md transition-shadow duration-300">
                        <div class="bg-secondary-100 p-3 rounded-lg mr-4">
                            <i data-feather="grid" class="text-secondary-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุนุฏุฏ ุงูุฃูุณุงู</p>
                            <p id="totalDepartments" class="text-2xl font-bold text-secondary-800">0</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start hover:shadow-md transition-shadow duration-300">
                        <div class="bg-purple-100 p-3 rounded-lg mr-4">
                            <i data-feather="calendar" class="text-purple-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุฅุฌูุงูู ุงููุดูู</p>
                            <p id="totalVisits" class="text-2xl font-bold text-purple-800">0</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start hover:shadow-md transition-shadow duration-300">
                        <div class="bg-indigo-100 p-3 rounded-lg mr-4">
                            <i data-feather="user-check" class="text-indigo-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-sm">ุงูุฃุทุจุงุก ุงููุชุงุญูู</p>
                            <p id="totalDoctorsOnline" class="text-2xl font-bold text-indigo-800">0</p>
                        </div>
                    </div>
                </div>
                
                <!-- ุฑุณูู ุจูุงููุฉ (ููุงููุฉ) -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                        <h3 class="text-lg font-bold mb-4 text-gray-700">ุชูุฒูุน ุงููุฑุถู ุญุณุจ ุงูุฃูุณุงู</h3>
                        <div class="h-64 flex items-center justify-center bg-gray-50 rounded-lg">
                            <p class="text-gray-400">ุฑุณู ุจูุงูู ุณูุธูุฑ ููุง</p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                        <h3 class="text-lg font-bold mb-4 text-gray-700">ุฅุญุตุงุฆูุฉ ุงูุญุถูุฑ ุงูุดูุฑูุฉ</h3>
                        <div class="h-64 flex items-center justify-center bg-gray-50 rounded-lg">
                            <p class="text-gray-400">ุฑุณู ุจูุงูู ุณูุธูุฑ ููุง</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Firebase Scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
        import { getDatabase, ref, onValue, remove, update, push, set, get, child } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

        // ====== ุฅุนุฏุงุฏุงุช Firebase ======
        const firebaseConfig = {
            apiKey: "AIzaSyB4glqZb0hz1uvERtq0pSZZzeBy3_grAnQ",
            authDomain: "smart-life-hospital-ef64c.firebaseapp.com",
            databaseURL: "https://smart-life-hospital-ef64c-default-rtdb.firebaseio.com",
            projectId: "smart-life-hospital-ef64c",
            storageBucket: "smart-life-hospital-ef64c.firebasestorage.app",
            messagingSenderId: "851045891087",
            appId: "1:851045891087:web:8e0f6e42f8c7fed17bf77a",
            measurementId: "G-QE5BL3MTY7"
        };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Vanta.js Background
        document.addEventListener('DOMContentLoaded', function() {
            VANTA.GLOBE({
                el: "#vanta-bg",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00,
                scale: 1.00,
                scaleMobile: 1.00,
                color: "#3b82f6",
                backgroundColor: "#ffffff",
                size: 0.8
            });
        });

        // Initialize Feather Icons
        feather.replace();

        // ุงูุชููู ุจูู ุงูุตูุญุงุช
        window.addEventListener("DOMContentLoaded", () => {
            const pages = document.querySelectorAll(".page");
            const links = document.querySelectorAll(".sidebar-link");
            
            links.forEach(link => {
                link.addEventListener("click", () => {
                    links.forEach(l => l.classList.remove("active"));
                    link.classList.add("active");
                    
                    pages.forEach(p => p.classList.add("hidden"));
                    document.getElementById(link.dataset.target).classList.remove("hidden");
                });
            });
            
            // ุจุงูู ููุฏ Firebase ููุง ูู ูู ุงููุต ุงูุฃุตูู
            // ===== ุงููุฑุถู =====
            const patientsTable = document.getElementById("patientsTable");
            const searchPatient = document.getElementById("searchPatient");
            const statsPatients = document.getElementById("totalPatients");
            const statsDepartments = document.getElementById("totalDepartments");
            const statsVisits = document.getElementById("totalVisits");
            const statsDoctorsOnline = document.getElementById("totalDoctorsOnline");
            let allPatients = [];
            const patientsRef = ref(db, "patients");
            
            // ุฏุงูุฉ ูุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ููุญุฉ ุงูุชุญูู
            function updateDashboardStats() {
                const statsPatients = document.getElementById("dashboardTotalPatients");
                const statsDoctorsOnline = document.getElementById("dashboardDoctorsOnline");
                const statsTotalVisits = document.getElementById("dashboardTotalVisits");
                const statsTotalDepartments = document.getElementById("dashboardTotalDepartments");
                
                if (allPatients.length > 0) {
                    const uniqueDepartments = new Set(allPatients.map(p => p.department)).size;
                    statsPatients.textContent = allPatients.length;
                    statsTotalDepartments.textContent = uniqueDepartments;
                    let totalVisits = 0;
                    allPatients.forEach(p => {
                        if (p.visits) totalVisits += Object.keys(p.visits).length;
                    });
                    statsTotalVisits.textContent = totalVisits;
                }
            }
            
            // ุฏุงูุฉ ูุชุญุฏูุซ ุฌุฏูู ุขุฎุฑ ุงููุฑุถู ูู ููุญุฉ ุงูุชุญูู
            function updateDashboardPatients(recentPatients) {
                const recentPatientsTable = document.getElementById("recentPatientsTable");
                recentPatientsTable.innerHTML = "";
                if (recentPatients.length === 0) {
                    recentPatientsTable.innerHTML = '<tr><td colspan="4" class="text-center p-4 text-gray-500">ูุง ุชูุฌุฏ ุจูุงูุงุช</td></tr>';
                    return;
                }
                recentPatients.forEach((patient) => {
                    const row = document.createElement("tr");
                    row.className = "hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${patient.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${patient.department}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${new Date(patient.timestamp).toLocaleDateString("ar-EG")}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">ูุดุท</span>
                        </td>
                    `;
                    recentPatientsTable.appendChild(row);
                });
            }
            
            onValue(patientsRef, (snapshot) => {
                const data = snapshot.val();
                let countPatients = 0;
                let countVisits = 0;
                let departmentSet = new Set();
                allPatients = [];
                if (data) {
                    Object.entries(data).forEach(([department, patients]) => {
                        departmentSet.add(department);
                        Object.entries(patients).forEach(([id, patient]) => {
                            countPatients++;
                            if (patient.visits) countVisits += Object.keys(patient.visits).length;
                            allPatients.push({ id, department, ...patient });
                        });
                    });
                    renderPatients(allPatients);
                    statsPatients.textContent = countPatients;
                    statsDepartments.textContent = departmentSet.size;
                    statsVisits.textContent = countVisits;
                    
                    // ุชุญุฏูุซ ููุญุฉ ุงูุชุญูู ุจุนุฏ ุชุญููู ุงููุฑุถู
                    updateDashboardStats();
                    updateDashboardPatients(allPatients.slice(0, 5)); // ุนุฑุถ ุขุฎุฑ 5 ูุฑุถู
                }
            });
            
            function renderPatients(patients) {
                patientsTable.innerHTML = "";
                if (patients.length === 0) {
                    patientsTable.innerHTML = '<tr><td colspan="5" class="text-center p-4 text-gray-500">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</td></tr>';
                    return;
                }
                patients.forEach((patient) => {
                    const row = document.createElement("tr");
                    row.className = "hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${patient.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${patient.age}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${patient.department}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${new Date(patient.timestamp).toLocaleString("ar-EG")}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                            <div class="flex justify-center space-x-2 space-x-reverse">
                                <button class="detailsBtn text-primary-600 hover:text-primary-900 flex items-center" data-id="${patient.id}" data-department="${patient.department}">
                                    <i data-feather="eye" class="w-4 h-4 mr-1"></i>
                                    ุชูุงุตูู
                                </button>
                                <button class="text-red-600 hover:text-red-900 flex items-center deleteBtn" data-id="${patient.id}" data-department="${patient.department}">
                                    <i data-feather="trash-2" class="w-4 h-4 mr-1"></i>
                                    ุญุฐู
                                </button>
                            </div>
                        </td>
                    `;
                    patientsTable.appendChild(row);
                });
                feather.replace();
                attachPatientEvents();
            }
            
            searchPatient.addEventListener("input", () => {
                const query = searchPatient.value.toLowerCase();
                const filtered = allPatients.filter(p =>
                    p.name.toLowerCase().includes(query) ||
                    p.nid?.toLowerCase().includes(query)
                );
                renderPatients(filtered);
            });
            
            function attachPatientEvents() {
                document.querySelectorAll(".detailsBtn").forEach(btn => {
                    btn.addEventListener("click", () => {
                        const id = btn.dataset.id;
                        const dept = btn.dataset.department;
                        const patient = allPatients.find(p => p.id === id && p.department === dept);
                        if (patient) {
                            Swal.fire({
                                title: "ุชูุงุตูู ุงููุฑูุถ",
                                html: `
                                    <div class="text-right text-sm">
                                        <p class="mb-2"><span class="font-bold text-gray-700">ุงูุงุณู:</span> ${patient.name}</p>
                                        <p class="mb-2"><span class="font-bold text-gray-700">ุงูุนูุฑ:</span> ${patient.age}</p>
                                        <p class="mb-2"><span class="font-bold text-gray-700">ุงููุณู:</span> ${patient.department}</p>
                                        <p class="mb-2"><span class="font-bold text-gray-700">ุงูุนููุงู:</span> ${patient.address || "-"}</p>
                                        <p class="mb-2"><span class="font-bold text-gray-700">ุงูุฃูุฑุงุถ:</span> ${patient.diseases || "-"}</p>
                                        <p class="mb-2"><span class="font-bold text-gray-700">ุงูุฏูุชูุฑ:</span> ${patient.doctors || "-"}</p>
                                    </div>
                                `,
                                icon: "info",
                                confirmButtonText: "ุฅุบูุงู",
                                customClass: {
                                    confirmButton: 'bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200'
                                }
                            });
                        }
                    });
                });
                
                document.querySelectorAll(".deleteBtn").forEach(button => {
                    button.addEventListener("click", () => {
                        const id = button.getAttribute("data-id");
                        const department = button.getAttribute("data-department");
                        const patientRef = ref(db, `patients/${department}/${id}`);
                        Swal.fire({
                            title: "ูู ุฃูุช ูุชุฃูุฏุ",
                            text: "ูู ุชุชููู ูู ุงูุชุฑุงุฌุน ุนู ุญุฐู ูุฐุง ุงููุฑูุถ!",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonText: "ูุนูุ ุงุญุฐู",
                            cancelButtonText: "ุฅูุบุงุก",
                            customClass: {
                                confirmButton: 'bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors duration-200',
                                cancelButton: 'bg-white hover:bg-gray-100 text-gray-700 font-medium py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200'
                            }
                        }).then((result) => {
                            if (result.isConfirmed) {
                                remove(patientRef)
                                    .then(() => Swal.fire("ุชู ุงูุญุฐู", "ุชู ุญุฐู ุงููุฑูุถ ุจูุฌุงุญ", "success"))
                                    .catch(() => Swal.fire("ุฎุทุฃ", "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู", "error"));
                            }
                        });
                    });
                });
            }
            
            // ===================== ุฅุถุงูุฉ ูุฑูุถ =====================
            document.getElementById("addPatientBtn").addEventListener("click", () => {
                Swal.fire({
                    title: "ุฅุถุงูุฉ ูุฑูุถ ุฌุฏูุฏ",
                    html: `
                        <div class="space-y-3">
                            <input id="patientName" class="swal2-input" placeholder="ุงูุงุณู ุงููุงูู">
                            <input id="patientAge" class="swal2-input" placeholder="ุงูุนูุฑ" type="number">
                            <input id="patientDepartment" class="swal2-input" placeholder="ุงููุณู">
                            <input id="patientNid" class="swal2-input" placeholder="ุงูุฑูู ุงููููู">
                            <textarea id="patientAddress" class="swal2-textarea" placeholder="ุงูุนููุงู"></textarea>
                            <textarea id="patientDiseases" class="swal2-textarea" placeholder="ุงูุฃูุฑุงุถ ุงููุฒููุฉ"></textarea>
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        const name = document.getElementById("patientName").value;
                        const age = document.getElementById("patientAge").value;
                        const department = document.getElementById("patientDepartment").value;
                        const nid = document.getElementById("patientNid").value;
                        const address = document.getElementById("patientAddress").value;
                        const diseases = document.getElementById("patientDiseases").value;
                        
                        const errors = validatePatientData({ name, age, department });
                        if (errors.length > 0) {
                            Swal.showValidationMessage(errors.join("<br>"));
                            return false;
                        }
                        
                        const newPatientRef = push(ref(db, `patients/${department}`));
                        return set(newPatientRef, {
                            name,
                            age: parseInt(age),
                            department,
                            nid,
                            address,
                            diseases,
                            timestamp: Date.now()
                        });
                    },
                    customClass: {
                        confirmButton: 'bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200',
                        cancelButton: 'bg-white hover:bg-gray-100 text-gray-700 font-medium py-2 px-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200'
                    }
                }).then(result => {
                    if (result.isConfirmed) {
                        Swal.fire({
                            title: "ุชู",
                            text: "ุชูุช ุฅุถุงูุฉ ุงููุฑูุถ ุจูุฌุงุญ",
                            icon: "success",
                            customClass: {
                                confirmButton: 'bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200'
                            }
                        });
                        loadDashboardData();
                    }
                }).catch(error => {
                    console.error("ุฎุทุฃ ูู ุฅุถุงูุฉ ุงููุฑูุถ:", error);
                    Swal.fire({
                        title: "ุฎุทุฃ",
                        text: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุถุงูุฉ ุงููุฑูุถ",
                        icon: "error",
                        customClass: {
                            confirmButton: 'bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200'
                        }
                    });
                });
            });
            
            function validatePatientData(patient) {
                const errors = [];
                if (!patient.name || patient.name.trim() === '') errors.push('ุงูุงุณู ูุทููุจ');
                if (!patient.age || isNaN(patient.age) || patient.age < 0) errors.push('ุงูุนูุฑ ุบูุฑ ุตุงูุญ');
                if (!patient.department || patient.department.trim() === '') errors.push('ุงููุณู ูุทููุจ');
                return errors;
            }
            // ===== ุงูุฃุทุจุงุก =====
            const doctorsTable = document.getElementById("doctorsTable");
            const availableDoctorsTable = document.getElementById("availableDoctorsTable");
            const filterShift = document.getElementById("filterShift");
            const addDoctorBtn = document.getElementById("addDoctorBtn");
            let allDoctors = [];
            const doctorsRef = ref(db, "doctors");

            onValue(doctorsRef, (snapshot) => {
                const data = snapshot.val();
                allDoctors = [];
                if (data) {
                    Object.entries(data).forEach(([id, doctor]) => {
                        allDoctors.push({ id, ...doctor });
                    });
                    renderDoctors(allDoctors);
                    renderAvailableDoctors(allDoctors.filter(d => d.status === "ูุชุงุญ"));
                    statsDoctorsOnline.textContent = allDoctors.filter(d => d.status === "ูุชุงุญ").length;
                    statsDoctors.textContent = allDoctors.length;
                }
            });

            filterShift.addEventListener("change", () => {
                const shift = filterShift.value;
                if (shift === "all") {
                    renderAvailableDoctors(allDoctors.filter(d => d.status === "ูุชุงุญ"));
                } else {
                    renderAvailableDoctors(allDoctors.filter(d => d.status === "ูุชุงุญ" && d.shift === shift));
                }
            });

            function renderDoctors(doctors) {
                doctorsTable.innerHTML = "";
                if (doctors.length === 0) {
                    doctorsTable.innerHTML = '<tr><td colspan="5" class="text-center p-4 text-gray-500">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</td></tr>';
                    return;
                }
                doctors.forEach((doctor) => {
                    const row = document.createElement("tr");
                    row.className = "hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${doctor.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${doctor.department}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${doctor.shift}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${doctor.status === "ูุชุงุญ" ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                                ${doctor.status}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                            <div class="flex justify-center space-x-2 space-x-reverse">
                                <button class="editDoctorBtn text-primary-600 hover:text-primary-900 flex items-center" data-id="${doctor.id}">
                                    <i data-feather="edit" class="w-4 h-4 mr-1"></i>
                                    ุชุนุฏูู
                                </button>
                                <button class="deleteDoctorBtn text-red-600 hover:text-red-900 flex items-center" data-id="${doctor.id}">
                                    <i data-feather="trash-2" class="w-4 h-4 mr-1"></i>
                                    ุญุฐู
                                </button>
                            </div>
                        </td>
                    `;
                    doctorsTable.appendChild(row);
                });
                feather.replace();
                attachDoctorEvents();
            }

            function renderAvailableDoctors(doctors) {
                availableDoctorsTable.innerHTML = "";
                if (doctors.length === 0) {
                    availableDoctorsTable.innerHTML = '<tr><td colspan="4" class="text-center p-4 text-gray-500">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</td></tr>';
                    return;
                }
                doctors.forEach((doctor) => {
                    const row = document.createElement("tr");
                    row.className = "hover:bg-gray-50";
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${doctor.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${doctor.department}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${doctor.shift}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                ${doctor.status}
                            </span>
                        </td>
                    `;
                    availableDoctorsTable.appendChild(row);
                });
                feather.replace();
            }

            // ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ
            addDoctorBtn.addEventListener("click", () => {
                Swal.fire({
                    title: "ุฅุถุงูุฉ ุทุจูุจ ุฌุฏูุฏ",
                    html: `
                        <div class="space-y-3">
                            <input id="doctorName" class="swal2-input" placeholder="ุงูุงุณู ุงููุงูู">
                            <input id="doctorSpecialty" class="swal2-input" placeholder="ุงูุชุฎุตุต">
                            <select id="doctorDepartment" class="swal2-select">
                                <option value="ุงูุทูุงุฑุฆ">ุงูุทูุงุฑุฆ</option>
                                <option value="ุงูุจุงุทูุฉ">ุงูุจุงุทูุฉ</option>
                                <option value="ุงูุฌุฑุงุญุฉ">ุงูุฌุฑุงุญุฉ</option>
                                <option value="ุงูุฃุทูุงู">ุงูุฃุทูุงู</option>
                                <option value="ุงูุนุธุงู">ุงูุนุธุงู</option>
                            </select>
                            <select id="doctorShift" class="swal2-select">
                                <option value="ุตุจุงุญู">ุตุจุงุญู</option>
                                <option value="ูุณุงุฆู">ูุณุงุฆู</option>
                                <option value="ูููู">ูููู</option>
                            </select>
                            <input id="doctorPhone" class="swal2-input" placeholder="ุฑูู ุงููุงุชู">
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        const name = document.getElementById("doctorName").value;
                        const specialty = document.getElementById("doctorSpecialty").value;
                        const department = document.getElementById("doctorDepartment").value;
                        const shift = document.getElementById("doctorShift").value;
                        const phone = document.getElementById("doctorPhone").value;
                        
                        if (!name || !specialty || !department || !shift) {
                            Swal.showValidationMessage("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌููุน ุงูุญููู ุงููุทููุจุฉ");
                            return false;
                        }
                        
                        const newDoctorRef = push(doctorsRef);
                        return set(newDoctorRef, {
                            name,
                            specialty,
                            department,
                            shift,
                            phone: phone || "-",
                            status: "ูุชุงุญ",
                            timestamp: Date.now()
                        });
                    }
                }).then(result => {
                    if (result.isConfirmed) {
                        Swal.fire("ุชู", "ุชูุช ุฅุถุงูุฉ ุงูุทุจูุจ ุจูุฌุงุญ", "success");
                    }
                });
            });

            function attachDoctorEvents() {
                document.querySelectorAll(".editDoctorBtn").forEach(btn => {
                    btn.addEventListener("click", () => {
                        const id = btn.dataset.id;
                        const doctor = allDoctors.find(d => d.id === id);
                        if (doctor) {
                            Swal.fire({
                                title: "ุชุนุฏูู ุจูุงูุงุช ุงูุทุจูุจ",
                                html: `
                                    <div class="space-y-3">
                                        <input id="editDoctorName" class="swal2-input" placeholder="ุงูุงุณู ุงููุงูู" value="${doctor.name}">
                                        <input id="editDoctorSpecialty" class="swal2-input" placeholder="ุงูุชุฎุตุต" value="${doctor.specialty}">
                                        <select id="editDoctorDepartment" class="swal2-select">
                                            <option value="ุงูุทูุงุฑุฆ" ${doctor.department === "ุงูุทูุงุฑุฆ" ? "selected" : ""}>ุงูุทูุงุฑุฆ</option>
                                            <option value="ุงูุจุงุทูุฉ" ${doctor.department === "ุงูุจุงุทูุฉ" ? "selected" : ""}>ุงูุจุงุทูุฉ</option>
                                            <option value="ุงูุฌุฑุงุญุฉ" ${doctor.department === "ุงูุฌุฑุงุญุฉ" ? "selected" : ""}>ุงูุฌุฑุงุญุฉ</option>
                                            <option value="ุงูุฃุทูุงู" ${doctor.department === "ุงูุฃุทูุงู" ? "selected" : ""}>ุงูุฃุทูุงู</option>
                                            <option value="ุงูุนุธุงู" ${doctor.department === "ุงูุนุธุงู" ? "selected" : ""}>ุงูุนุธุงู</option>
                                        </select>
                                        <select id="editDoctorShift" class="swal2-select">
                                            <option value="ุตุจุงุญู" ${doctor.shift === "ุตุจุงุญู" ? "selected" : ""}>ุตุจุงุญู</option>
                                            <option value="ูุณุงุฆู" ${doctor.shift === "ูุณุงุฆู" ? "selected" : ""}>ูุณุงุฆู</option>
                                            <option value="ูููู" ${doctor.shift === "ูููู" ? "selected" : ""}>ูููู</option>
                                        </select>
                                        <select id="editDoctorStatus" class="swal2-select">
                                            <option value="ูุชุงุญ" ${doctor.status === "ูุชุงุญ" ? "selected" : ""}>ูุชุงุญ</option>
                                            <option value="ุบูุฑ ูุชุงุญ" ${doctor.status === "ุบูุฑ ูุชุงุญ" ? "selected" : ""}>ุบูุฑ ูุชุงุญ</option>
                                        </select>
                                        <input id="editDoctorPhone" class="swal2-input" placeholder="ุฑูู ุงููุงุชู" value="${doctor.phone || ""}">
                                    </div>
                                `,
                                focusConfirm: false,
                                preConfirm: () => {
                                    const name = document.getElementById("editDoctorName").value;
                                    const specialty = document.getElementById("editDoctorSpecialty").value;
                                    const department = document.getElementById("editDoctorDepartment").value;
                                    const shift = document.getElementById("editDoctorShift").value;
                                    const status = document.getElementById("editDoctorStatus").value;
                                    const phone = document.getElementById("editDoctorPhone").value;
                                    
                                    if (!name || !specialty || !department || !shift || !status) {
                                        Swal.showValidationMessage("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌููุน ุงูุญููู ุงููุทููุจุฉ");
                                        return false;
                                    }
                                    
                                    return update(ref(db, `doctors/${id}`), {
                                        name,
                                        specialty,
                                        department,
                                        shift,
                                        status,
                                        phone: phone || "-"
                                    });
                                }
                            }).then(result => {
                                if (result.isConfirmed) {
                                    Swal.fire("ุชู", "ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุจูุจ ุจูุฌุงุญ", "success");
                                }
                            });
                        }
                    });
                });

                document.querySelectorAll(".deleteDoctorBtn").forEach(btn => {
                    btn.addEventListener("click", () => {
                        const id = btn.dataset.id;
                        Swal.fire({
                            title: "ูู ุฃูุช ูุชุฃูุฏุ",
                            text: "ูู ุชุชููู ูู ุงูุชุฑุงุฌุน ุนู ุญุฐู ูุฐุง ุงูุทุจูุจ!",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonText: "ูุนูุ ุงุญุฐู",
                            cancelButtonText: "ุฅูุบุงุก"
                        }).then((result) => {
                            if (result.isConfirmed) {
                                remove(ref(db, `doctors/${id}`))
                                    .then(() => Swal.fire("ุชู ุงูุญุฐู", "ุชู ุญุฐู ุงูุทุจูุจ ุจูุฌุงุญ", "success"))
                                    .catch(() => Swal.fire("ุฎุทุฃ", "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู", "error"));
                            }
                        });
                    });
                });
            }
            // Initialize with Dashboard and load all data
            document.querySelector('.sidebar-link[data-target="adminDashboard"]').click();
            
            // Load all sections data
            loadDoctorsData();
            loadDepartmentsData();
            loadStaffData();
            loadAttendanceData();
            loadInventoryData();

            function loadDoctorsData() {
                const doctorsRef = ref(db, "doctors");
                onValue(doctorsRef, (snapshot) => {
                    const data = snapshot.val();
                    allDoctors = [];
                    if (data) {
                        Object.entries(data).forEach(([id, doctor]) => {
                            allDoctors.push({ id, ...doctor });
                        });
                        renderDoctors(allDoctors);
                        renderAvailableDoctors(allDoctors.filter(d => d.status === "ูุชุงุญ"));
                        statsDoctorsOnline.textContent = allDoctors.filter(d => d.status === "ูุชุงุญ").length;
                    }
                });
            }

            function loadDepartmentsData() {
                const deptsRef = ref(db, "departments");
                onValue(deptsRef, (snapshot) => {
                    const data = snapshot.val();
                    const deptsTable = document.getElementById("departmentsTable");
                    deptsTable.innerHTML = "";
                    if (data) {
                        Object.entries(data).forEach(([id, dept]) => {
                            const row = document.createElement("tr");
                            row.className = "hover:bg-gray-50";
                            row.innerHTML = `
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${dept.name}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${dept.manager || "-"}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                                    <div class="flex justify-center space-x-2 space-x-reverse">
                                        <button class="editDeptBtn text-primary-600 hover:text-primary-900" data-id="${id}">
                                            <i data-feather="edit" class="w-4 h-4"></i>
                                        </button>
                                        <button class="deleteDeptBtn text-red-600 hover:text-red-900" data-id="${id}">
                                            <i data-feather="trash-2" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </td>
                            `;
                            deptsTable.appendChild(row);
                        });
                        feather.replace();
                        attachDeptEvents();
                    }
                });
            }

            function loadStaffData() {
                const staffRef = ref(db, "staff");
                onValue(staffRef, (snapshot) => {
                    const data = snapshot.val();
                    const staffTable = document.getElementById("staffTable");
                    staffTable.innerHTML = "";
                    if (data) {
                        Object.entries(data).forEach(([id, staff]) => {
                            const row = document.createElement("tr");
                            row.className = "hover:bg-gray-50";
                            row.innerHTML = `
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${staff.name}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${staff.position}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${staff.department || "-"}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${staff.phone || "-"}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                                    <div class="flex justify-center space-x-2 space-x-reverse">
                                        <button class="editStaffBtn text-primary-600 hover:text-primary-900" data-id="${id}">
                                            <i data-feather="edit" class="w-4 h-4"></i>
                                        </button>
                                        <button class="deleteStaffBtn text-red-600 hover:text-red-900" data-id="${id}">
                                            <i data-feather="trash-2" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </td>
                            `;
                            staffTable.appendChild(row);
                        });
                        feather.replace();
                        attachStaffEvents();
                    }
                });
            }

            function loadAttendanceData() {
                const attendanceRef = ref(db, "attendance");
                onValue(attendanceRef, (snapshot) => {
                    const data = snapshot.val();
                    const attendanceTable = document.getElementById("attendanceTable");
                    attendanceTable.innerHTML = "";
                    if (data) {
                        Object.entries(data).forEach(([id, attendee]) => {
                            const row = document.createElement("tr");
                            row.className = "hover:bg-gray-50";
                            row.innerHTML = `
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${attendee.name}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${attendee.type}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${attendee.department || "-"}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${attendee.status === "ุญุงุถุฑ" ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${attendee.status}
                                    </span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                                    <button class="toggleAttendance text-primary-600 hover:text-primary-900" data-id="${id}" data-current="${attendee.status}">
                                        <i data-feather="${attendee.status === "ุญุงุถุฑ" ? "x-circle" : "check-circle"}" class="w-4 h-4"></i>
                                    </button>
                                </td>
                            `;
                            attendanceTable.appendChild(row);
                        });
                        feather.replace();
                        attachAttendanceEvents();
                    }
                });
            }

            function loadInventoryData() {
                const inventoryRef = ref(db, "inventory");
                onValue(inventoryRef, (snapshot) => {
                    const data = snapshot.val();
                    const inventoryTable = document.getElementById("inventoryTable");
                    inventoryTable.innerHTML = "";
                    if (data) {
                        Object.entries(data).forEach(([id, item]) => {
                            const row = document.createElement("tr");
                            row.className = "hover:bg-gray-50";
                            row.innerHTML = `
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${item.name}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${item.currentQty}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${item.minQty}</td>
                                <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                                    <div class="flex justify-center space-x-2 space-x-reverse">
                                        <button class="restockBtn text-green-600 hover:text-green-900" data-id="${id}">
                                            <i data-feather="plus" class="w-4 h-4"></i>
                                        </button>
                                        <button class="editItemBtn text-primary-600 hover:text-primary-900" data-id="${id}">
                                            <i data-feather="edit" class="w-4 h-4"></i>
                                        </button>
                                        <button class="deleteItemBtn text-red-600 hover:text-red-900" data-id="${id}">
                                            <i data-feather="trash-2" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </td>
                            `;
                            inventoryTable.appendChild(row);
                        });
                        feather.replace();
                        attachInventoryEvents();
                    }
                });
            }

            // Attach events for all sections
            function attachDeptEvents() {
                document.querySelectorAll(".editDeptBtn").forEach(btn => {
                    btn.addEventListener("click", editDepartment);
                });
                document.querySelectorAll(".deleteDeptBtn").forEach(btn => {
                    btn.addEventListener("click", deleteDepartment);
                });
            }

            function attachStaffEvents() {
                document.querySelectorAll(".editStaffBtn").forEach(btn => {
                    btn.addEventListener("click", editStaff);
                });
                document.querySelectorAll(".deleteStaffBtn").forEach(btn => {
                    btn.addEventListener("click", deleteStaff);
                });
            }

            function attachAttendanceEvents() {
                document.querySelectorAll(".toggleAttendance").forEach(btn => {
                    btn.addEventListener("click", toggleAttendance);
                });
            }

            function attachInventoryEvents() {
                document.querySelectorAll(".restockBtn").forEach(btn => {
                    btn.addEventListener("click", restockItem);
                });
                document.querySelectorAll(".editItemBtn").forEach(btn => {
                    btn.addEventListener("click", editInventoryItem);
                });
                document.querySelectorAll(".deleteItemBtn").forEach(btn => {
                    btn.addEventListener("click", deleteInventoryItem);
                });
            }

            // Add button event listeners
            document.getElementById("addDeptBtn").addEventListener("click", addDepartment);
            document.getElementById("addStaffBtn").addEventListener("click", addStaff);
            document.getElementById("registerFingerprintBtn").addEventListener("click", registerFingerprint);
            document.getElementById("addInventoryBtn").addEventListener("click", addInventoryItem);

            // Tab switching for attendance
            document.querySelectorAll(".attendance-tab").forEach(tab => {
                tab.addEventListener("click", function() {
                    document.querySelectorAll(".attendance-tab").forEach(t => t.classList.remove("active"));
                    this.classList.add("active");
                    const type = this.dataset.type;
                    if (type === "all") {
                        loadAttendanceData();
                    } else {
                        const attendanceRef = ref(db, "attendance");
                        onValue(attendanceRef, (snapshot) => {
                            const data = snapshot.val();
                            const attendanceTable = document.getElementById("attendanceTable");
                            attendanceTable.innerHTML = "";
                            if (data) {
                                Object.entries(data).forEach(([id, attendee]) => {
                                    if (attendee.type === type) {
                                        const row = document.createElement("tr");
                                        row.className = "hover:bg-gray-50";
                                        row.innerHTML = `
                                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900">${attendee.name}</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${attendee.type}</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">${attendee.department || "-"}</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${attendee.status === "ุญุงุถุฑ" ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                                    ${attendee.status}
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500">
                                                <button class="toggleAttendance text-primary-600 hover:text-primary-900" data-id="${id}" data-current="${attendee.status}">
                                                    <i data-feather="${attendee.status === "ุญุงุถุฑ" ? "x-circle" : "check-circle"}" class="w-4 h-4"></i>
                                                </button>
                                            </td>
                                        `;
                                        attendanceTable.appendChild(row);
                                    }
                                });
                                feather.replace();
                                attachAttendanceEvents();
                            }
                        });
                    }
                });
            });

            // Department functions
            function addDepartment() {
                Swal.fire({
                    title: "ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ",
                    html: `
                        <div class="space-y-3">
                            <input id="deptName" class="swal2-input" placeholder="ุงุณู ุงููุณู">
                            <input id="deptManager" class="swal2-input" placeholder="ูุฏูุฑ ุงููุณู">
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        const name = document.getElementById("deptName").value;
                        const manager = document.getElementById("deptManager").value;
                        
                        if (!name) {
                            Swal.showValidationMessage("ุงุณู ุงููุณู ูุทููุจ");
                            return false;
                        }
                        
                        const newDeptRef = push(ref(db, "departments"));
                        return set(newDeptRef, {
                            name,
                            manager: manager || "-",
                            timestamp: Date.now()
                        });
                    }
                }).then(result => {
                    if (result.isConfirmed) {
                        Swal.fire("ุชู", "ุชูุช ุฅุถุงูุฉ ุงููุณู ุจูุฌุงุญ", "success");
                    }
                });
            }

            function editDepartment() {
                const id = this.dataset.id;
                const deptRef = ref(db, `departments/${id}`);
                get(deptRef).then((snapshot) => {
                    const dept = snapshot.val();
                    Swal.fire({
                        title: "ุชุนุฏูู ุงููุณู",
                        html: `
                            <div class="space-y-3">
                                <input id="editDeptName" class="swal2-input" placeholder="ุงุณู ุงููุณู" value="${dept.name}">
                                <input id="editDeptManager" class="swal2-input" placeholder="ูุฏูุฑ ุงููุณู" value="${dept.manager || ""}">
                            </div>
                        `,
                        focusConfirm: false,
                        preConfirm: () => {
                            const name = document.getElementById("editDeptName").value;
                            const manager = document.getElementById("editDeptManager").value;
                            
                            if (!name) {
                                Swal.showValidationMessage("ุงุณู ุงููุณู ูุทููุจ");
                                return false;
                            }
                            
                            return update(deptRef, {
                                name,
                                manager: manager || "-"
                            });
                        }
                    }).then(result => {
                        if (result.isConfirmed) {
                            Swal.fire("ุชู", "ุชู ุชุญุฏูุซ ุงููุณู ุจูุฌุงุญ", "success");
                        }
                    });
                });
            }

            function deleteDepartment() {
                const id = this.dataset.id;
                Swal.fire({
                    title: "ูู ุฃูุช ูุชุฃูุฏุ",
                    text: "ูู ุชุชููู ูู ุงูุชุฑุงุฌุน ุนู ุญุฐู ูุฐุง ุงููุณู!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonText: "ูุนูุ ุงุญุฐู",
                    cancelButtonText: "ุฅูุบุงุก"
                }).then((result) => {
                    if (result.isConfirmed) {
                        remove(ref(db, `departments/${id}`))
                            .then(() => Swal.fire("ุชู ุงูุญุฐู", "ุชู ุญุฐู ุงููุณู ุจูุฌุงุญ", "success"))
                            .catch(() => Swal.fire("ุฎุทุฃ", "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู", "error"));
                    }
                });
            }

            // Staff functions
            function addStaff() {
                Swal.fire({
                    title: "ุฅุถุงูุฉ ููุธู ุฌุฏูุฏ",
                    html: `
                        <div class="space-y-3">
                            <input id="staffName" class="swal2-input" placeholder="ุงูุงุณู ุงููุงูู">
                            <input id="staffPosition" class="swal2-input" placeholder="ุงููุธููุฉ">
                            <input id="staffDepartment" class="swal2-input" placeholder="ุงููุณู">
                            <input id="staffPhone" class="swal2-input" placeholder="ุฑูู ุงููุงุชู">
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        const name = document.getElementById("staffName").value;
                        const position = document.getElementById("staffPosition").value;
                        const department = document.getElementById("staffDepartment").value;
                        const phone = document.getElementById("staffPhone").value;
                        
                        if (!name || !position) {
                            Swal.showValidationMessage("ุงูุงุณู ูุงููุธููุฉ ูุทููุจุงู");
                            return false;
                        }
                        
                        const newStaffRef = push(ref(db, "staff"));
                        return set(newStaffRef, {
                            name,
                            position,
                            department: department || "-",
                            phone: phone || "-",
                            timestamp: Date.now()
                        });
                    }
                }).then(result => {
                    if (result.isConfirmed) {
                        Swal.fire("ุชู", "ุชูุช ุฅุถุงูุฉ ุงูููุธู ุจูุฌุงุญ", "success");
                    }
                });
            }

            function editStaff() {
                const id = this.dataset.id;
                const staffRef = ref(db, `staff/${id}`);
                get(staffRef).then((snapshot) => {
                    const staff = snapshot.val();
                    Swal.fire({
                        title: "ุชุนุฏูู ุจูุงูุงุช ุงูููุธู",
                        html: `
                            <div class="space-y-3">
                                <input id="editStaffName" class="swal2-input" placeholder="ุงูุงุณู ุงููุงูู" value="${staff.name}">
                                <input id="editStaffPosition" class="swal2-input" placeholder="ุงููุธููุฉ" value="${staff.position}">
                                <input id="editStaffDepartment" class="swal2-input" placeholder="ุงููุณู" value="${staff.department || ""}">
                                <input id="editStaffPhone" class="swal2-input" placeholder="ุฑูู ุงููุงุชู" value="${staff.phone || ""}">
                            </div>
                        `,
                        focusConfirm: false,
                        preConfirm: () => {
                            const name = document.getElementById("editStaffName").value;
                            const position = document.getElementById("editStaffPosition").value;
                            const department = document.getElementById("editStaffDepartment").value;
                            const phone = document.getElementById("editStaffPhone").value;
                            
                            if (!name || !position) {
                                Swal.showValidationMessage("ุงูุงุณู ูุงููุธููุฉ ูุทููุจุงู");
                                return false;
                            }
                            
                            return update(staffRef, {
                                name,
                                position,
                                department: department || "-",
                                phone: phone || "-"
                            });
                        }
                    }).then(result => {
                        if (result.isConfirmed) {
                            Swal.fire("ุชู", "ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูููุธู ุจูุฌุงุญ", "success");
                        }
                    });
                });
            }

            function deleteStaff() {
                const id = this.dataset.id;
                Swal.fire({
                    title: "ูู ุฃูุช ูุชุฃูุฏุ",
                    text: "ูู ุชุชููู ูู ุงูุชุฑุงุฌุน ุนู ุญุฐู ูุฐุง ุงูููุธู!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonText: "ูุนูุ ุงุญุฐู",
                    cancelButtonText: "ุฅูุบุงุก"
                }).then((result) => {
                    if (result.isConfirmed) {
                        remove(ref(db, `staff/${id}`))
                            .then(() => Swal.fire("ุชู ุงูุญุฐู", "ุชู ุญุฐู ุงูููุธู ุจูุฌุงุญ", "success"))
                            .catch(() => Swal.fire("ุฎุทุฃ", "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู", "error"));
                    }
                });
            }

            // Attendance functions
            function toggleAttendance() {
                const id = this.dataset.id;
                const currentStatus = this.dataset.current;
                const newStatus = currentStatus === "ุญุงุถุฑ" ? "ุบุงุฆุจ" : "ุญุงุถุฑ";
                
                update(ref(db, `attendance/${id}`), {
                    status: newStatus
                }).then(() => {
                    loadAttendanceData();
                });
            }

            function registerFingerprint() {
                Swal.fire({
                    title: "ุชุณุฌูู ุจุตูุฉ ุฌุฏูุฏุฉ",
                    html: `
                        <div class="space-y-3">
                            <select id="fingerprintType" class="swal2-select">
                                <option value="ุทุจูุจ">ุทุจูุจ</option>
                                <option value="ููุธู">ููุธู</option>
                            </select>
                            <input id="fingerprintName" class="swal2-input" placeholder="ุงูุงุณู ุงููุงูู">
                            <input id="fingerprintDepartment" class="swal2-input" placeholder="ุงููุณู">
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        const type = document.getElementById("fingerprintType").value;
                        const name = document.getElementById("fingerprintName").value;
                        const department = document.getElementById("fingerprintDepartment").value;
                        
                        if (!name) {
                            Swal.showValidationMessage("ุงูุงุณู ูุทููุจ");
                            return false;
                        }
                        
                        const newAttendanceRef = push(ref(db, "attendance"));
                        return set(newAttendanceRef, {
                            type,
                            name,
                            department: department || "-",
                            status: "ุบุงุฆุจ",
                            timestamp: Date.now()
                        });
                    }
                }).then(result => {
                    if (result.isConfirmed) {
                        Swal.fire("ุชู", "ุชู ุชุณุฌูู ุงูุจูุงูุงุช ุจูุฌุงุญ", "success");
                    }
                });
            }

            // Inventory functions
            function addInventoryItem() {
                Swal.fire({
                    title: "ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ",
                    html: `
                        <div class="space-y-3">
                            <input id="itemName" class="swal2-input" placeholder="ุงุณู ุงูููุชุฌ">
                            <input id="itemCurrentQty" class="swal2-input" placeholder="ุงููููุฉ ุงูุญุงููุฉ" type="number">
                            <input id="itemMinQty" class="swal2-input" placeholder="ุงูุญุฏ ุงูุฃุฏูู" type="number">
                        </div>
                    `,
                    focusConfirm: false,
                    preConfirm: () => {
                        const name = document.getElementById("itemName").value;
                        const currentQty = document.getElementById("itemCurrentQty").value;
                        const minQty = document.getElementById("itemMinQty").value;
                        
                        if (!name || !currentQty || !minQty) {
                            Swal.showValidationMessage("ุฌููุน ุงูุญููู ูุทููุจุฉ");
                            return false;
                        }
                        
                        const newItemRef = push(ref(db, "inventory"));
                        return set(newItemRef, {
                            name,
                            currentQty: parseInt(currentQty),
                            minQty: parseInt(minQty),
                            timestamp: Date.now()
                        });
                    }
                }).then(result => {
                    if (result.isConfirmed) {
                        Swal.fire("ุชู", "ุชูุช ุฅุถุงูุฉ ุงูููุชุฌ ุจูุฌุงุญ", "success");
                    }
                });
            }

            function restockItem() {
                const id = this.dataset.id;
                const itemRef = ref(db, `inventory/${id}`);
                
                get(itemRef).then((snapshot) => {
                    const item = snapshot.val();
                    Swal.fire({
                        title: "ุฅุถุงูุฉ ูููุฉ ููููุชุฌ",
                        html: `
                            <div class="space-y-3">
                                <p class="text-sm text-gray-500">${item.name}</p>
                                <input id="restockQty" class="swal2-input" placeholder="ุงููููุฉ ุงููุถุงูุฉ" type="number" min="1">
                            </div>
                        `,
                        focusConfirm: false,
                        preConfirm: () => {
                            const qty = parseInt(document.getElementById("restockQty").value);
                            
                            if (isNaN(qty) || qty <= 0) {
                                Swal.showValidationMessage("ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ");
                                return false;
                            }
                            
                            const newQty = item.currentQty + qty;
                            return update(itemRef, {
                                currentQty: newQty
                            });
                        }
                    }).then(result => {
                        if (result.isConfirmed) {
                            Swal.fire("ุชู", "ุชูุช ุฅุถุงูุฉ ุงููููุฉ ุจูุฌุงุญ", "success");
                        }
                    });
                });
            }

            function editInventoryItem() {
                const id = this.dataset.id;
                const itemRef = ref(db, `inventory/${id}`);
                
                get(itemRef).then((snapshot) => {
                    const item = snapshot.val();
                    Swal.fire({
                        title: "ุชุนุฏูู ุงูููุชุฌ",
                        html: `
                            <div class="space-y-3">
                                <input id="editItemName" class="swal2-input" placeholder="ุงุณู ุงูููุชุฌ" value="${item.name}">
                                <input id="editItemCurrentQty" class="swal2-input" placeholder="ุงููููุฉ ุงูุญุงููุฉ" type="number" value="${item.currentQty}">
                                <input id="editItemMinQty" class="swal2-input" placeholder="ุงูุญุฏ ุงูุฃุฏูู" type="number" value="${item.minQty}">
                            </div>
                        `,
                        focusConfirm: false,
                        preConfirm: () => {
                            const name = document.getElementById("editItemName").value;
                            const currentQty = document.getElementById("editItemCurrentQty").value;
                            const minQty = document.getElementById("editItemMinQty").value;
                            
                            if (!name || !currentQty || !minQty) {
                                Swal.showValidationMessage("ุฌููุน ุงูุญููู ูุทููุจุฉ");
                                return false;
                            }
                            
                            return update(itemRef, {
                                name,
                                currentQty: parseInt(currentQty),
                                minQty: parseInt(minQty)
                            });
                        }
                    }).then(result => {
                        if (result.isConfirmed) {
                            Swal.fire("ุชู", "ุชู ุชุญุฏูุซ ุงูููุชุฌ ุจูุฌุงุญ", "success");
                        }
                    });
                });
            }

            function deleteInventoryItem() {
                const id = this.dataset.id;
                Swal.fire({
                    title: "ูู ุฃูุช ูุชุฃูุฏุ",
                    text: "ูู ุชุชููู ูู ุงูุชุฑุงุฌุน ุนู ุญุฐู ูุฐุง ุงูููุชุฌ!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonText: "ูุนูุ ุงุญุฐู",
                    cancelButtonText: "ุฅูุบุงุก"
                }).then((result) => {
                    if (result.isConfirmed) {
                        remove(ref(db, `inventory/${id}`))
                            .then(() => Swal.fire("ุชู ุงูุญุฐู", "ุชู ุญุฐู ุงูููุชุฌ ุจูุฌุงุญ", "success"))
                            .catch(() => Swal.fire("ุฎุทุฃ", "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุญุฐู", "error"));
                    }
                });
            }
});
    </script>
    
    <!-- Vanta.js for animated background -->
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
</body>
</html>
