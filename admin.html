<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>الصفحة الرئيسية - مدير المستشفى</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    body { font-family: 'Tajawal', sans-serif; }
    .sidebar {
      width: 250px;
      transition: all 0.3s ease;
    }
    .sidebar.collapsed {
      width: 70px;
    }
    .sidebar.collapsed .sidebar-text {
      display: none;
    }
    .active-link {
      background-color: #2563eb;
      color: white;
    }
  </style>
</head>
<body class="bg-gray-50 flex min-h-screen">

  <!-- ===== القائمة الجانبية ===== -->
  <aside id="sidebar" class="sidebar bg-white shadow-lg flex flex-col">
    <div class="flex items-center gap-3 p-4 border-b border-gray-200">
      <img src="https://t90121098672.p.clickup-attachments.com/t90121098672/aab7a4bd-0c9c-438c-8bfa-b5b1ec339843/generated-image-05102b72-8a2a-485a-9362-1371947b2a5a.png?view=open"
           class="w-12 h-12 rounded-full border-2 border-blue-600"/>
      <span class="text-lg font-bold sidebar-text">مستشفى الحياة الذكية</span>
    </div>
    <nav class="flex-1">
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100 active-link">
        <i class="fas fa-home"></i> <span class="sidebar-text">الرئيسية</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100">
        <i class="fas fa-chart-line"></i> <span class="sidebar-text">لوحة التحكم</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100">
        <i class="fas fa-user-md"></i> <span class="sidebar-text">إدارة الأطباء</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100">
        <i class="fas fa-procedures"></i> <span class="sidebar-text">إدارة المرضى</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100">
        <i class="fas fa-user-nurse"></i> <span class="sidebar-text">الممرضين</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100">
        <i class="fas fa-users"></i> <span class="sidebar-text">الموظفين</span>
      </a>
      <a href="#" class="flex items-center gap-3 p-3 hover:bg-blue-100">
        <i class="fas fa-info-circle"></i> <span class="sidebar-text">الإحصائيات</span>
      </a>
    </nav>
    <button id="toggleSidebar" class="p-3 text-gray-600 hover:text-blue-600">
      <i class="fas fa-bars"></i>
    </button>
  </aside>

  <!-- ===== محتوى الصفحة ===== -->
  <main class="flex-1 p-6">
    <!-- بانر ترحيب -->
    <div class="bg-blue-600 text-white rounded-lg p-6 mb-6 flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-bold mb-2">مرحباً بمدير المستشفى</h1>
        <p>هذه هي واجهة الإدارة لمتابعة كل أقسام المستشفى بسهولة</p>
      </div>
      <img src="https://t90121098672.p.clickup-attachments.com/t90121098672/aab7a4bd-0c9c-438c-8bfa-b5b1ec339843/generated-image-05102b72-8a2a-485a-9362-1371947b2a5a.png?view=open"
           class="w-24 h-24 rounded-full border-4 border-white">
    </div>

    <!-- بطاقات إحصائيات -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-white p-4 rounded shadow text-center">
        <h3 class="text-sm text-gray-500">إجمالي المرضى</h3>
        <p class="text-2xl font-bold text-blue-600" id="statPatients">0</p>
      </div>
      <div class="bg-white p-4 rounded shadow text-center">
        <h3 class="text-sm text-gray-500">عدد الأطباء</h3>
        <p class="text-2xl font-bold text-green-600" id="statDoctors">0</p>
      </div>
      <div class="bg-white p-4 rounded shadow text-center">
        <h3 class="text-sm text-gray-500">عدد الممرضين</h3>
        <p class="text-2xl font-bold text-purple-600" id="statNurses">0</p>
      </div>
      <div class="bg-white p-4 rounded shadow text-center">
        <h3 class="text-sm text-gray-500">عدد الموظفين</h3>
        <p class="text-2xl font-bold text-red-600" id="statStaff">0</p>
      </div>
    </div>

    <!-- أحدث الأخبار -->
    <div class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-bold mb-3 text-blue-700">أحدث الأخبار</h2>
      <ul id="newsList" class="list-disc pl-5 text-gray-700">
        <li>تحديث نظام الطوارئ الجديد</li>
        <li>بدء حملة تطعيمات موسمية</li>
      </ul>
      <button class="mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
        المزيد من الأخبار
      </button>
    </div>

    <!-- الأنشطة الأخيرة -->
    <div class="bg-white p-4 rounded shadow mb-6">
      <h2 class="text-xl font-bold mb-3 text-blue-700">الأنشطة الأخيرة</h2>
      <ul id="activitiesList" class="text-gray-700 space-y-2">
        <li>تم إضافة مريض جديد إلى قسم الطوارئ</li>
        <li>تم تعديل حالة طبيب – متاح الآن</li>
      </ul>
    </div>

    <!-- أزرار سريعة -->
    <div class="flex gap-4">
      <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
        إضافة مريض
      </button>
      <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
        إضافة طبيب
      </button>
      <button class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
        عرض التقارير
      </button>
    </div>
  </main>

  <!-- Firebase لجلب البيانات -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArPFi04c_vDP5Gi8bM4pem_LuvMx_eJG0",
      authDomain: "hospital-project-e4b59.firebaseapp.com",
      databaseURL: "https://hospital-project-e4b59-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "hospital-project-e4b59",
      storageBucket: "hospital-project-e4b59.appspot.com",
      messagingSenderId: "974610606258",
      appId: "1:974610606258:web:71ce7d5d447bca4b4441ab"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // إحصائيات
    const statPatients = document.getElementById('statPatients');
    const statDoctors = document.getElementById('statDoctors');
    const statNurses = document.getElementById('statNurses');
    const statStaff = document.getElementById('statStaff');

    onValue(ref(db, 'patients'), snap => {
      const data = snap.val();
      let count = 0;
      if (data) {
        Object.values(data).forEach(dept => count += Object.keys(dept).length);
      }
      statPatients.textContent = count;
    });

    onValue(ref(db, 'doctors'), snap => {
      statDoctors.textContent = snap.exists() ? Object.keys(snap.val()).length : 0;
    });

    onValue(ref(db, 'nurses'), snap => {
      statNurses.textContent = snap.exists() ? Object.keys(snap.val()).length : 0;
    });

    onValue(ref(db, 'staff'), snap => {
      statStaff.textContent = snap.exists() ? Object.keys(snap.val()).length : 0;
    });

    // زر إخفاء/إظهار القائمة
    document.getElementById('toggleSidebar').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('collapsed');
    });
  </script>

</body>
</html>
